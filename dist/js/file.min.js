document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-fls-file]").forEach(o=>{const a=o.querySelector(".file__input"),d=o.querySelector("[data-file-trigger]"),s=o.querySelector(".file__list");if(!a||!d||!s)return;let r=new DataTransfer;d.addEventListener("click",()=>a.click());const m=t=>{const i=["B","KB","MB","GB"];let e=0,n=t;for(;n>=1024&&e<i.length-1;)n/=1024,e++;return`${n.toFixed(n<10&&e?1:0)} ${i[e]}`};function c(){s.innerHTML="",Array.from(r.files).forEach(t=>{const i=`${t.lastModified}:${t.size}:${t.name}`,e=document.createElement("li");e.className="file__item",e.dataset.key=i;const n=document.createElement("span");n.className="file__name",n.textContent=`${t.name} (${m(t.size)})`;const l=document.createElement("button");l.type="button",l.className="file__remove",l.textContent="\u2715",l.addEventListener("click",()=>f(i)),e.append(n,l),s.appendChild(e)}),a.files=r.files}function f(t){const i=new DataTransfer;Array.from(r.files).forEach(e=>{`${e.lastModified}:${e.size}:${e.name}`!==t&&i.items.add(e)}),r=i,c()}a.addEventListener("change",()=>{Array.from(a.files).forEach(t=>r.items.add(t)),c(),a.value=""}),c()})});
